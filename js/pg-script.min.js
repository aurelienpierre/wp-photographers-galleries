function Scroll(n,id){var matte=document.getElementById(id),current_position=matte.scrollLeft+matte.offsetWidth/2,images=matte.querySelectorAll("figure"),centers=[],widths=[];images.forEach((function(img){var half_width=img.offsetWidth/2;centers.push(img.offsetLeft+half_width),widths.push(half_width)}));for(var current_index=0,distance=9999999999,i=0;i<centers.length;i++){var current_distance=Math.abs(current_position-centers[i]);current_distance<distance&&(distance=current_distance,current_index=i)}(current_index+=n)<0&&(current_index=0),current_index>centers.length-1&&(current_index=centers.length-1);var position=centers[current_index]-matte.offsetWidth/2;matte.scroll({top:0,left:position,behavior:"smooth"})}var timer,resize_timeout,isScrolling;function updateArrows(event,id){clearTimeout(timer),timer=setTimeout((function(){var matte=document.getElementById(id),arrow_left=matte.getElementsByClassName("gallery-prev")[0],arrow_right=matte.getElementsByClassName("gallery-next")[0];0==matte.scrollLeft?arrow_left.style.display="none":arrow_left.style.display="block",matte.scrollLeft==matte.scrollLeftMax?arrow_right.style.display="none":arrow_right.style.display="block"}),300)}function removeArrows(matte){var arrow_left=matte.getElementsByClassName("gallery-prev")[0],arrow_right=matte.getElementsByClassName("gallery-next")[0];arrow_left.style.display="none",arrow_right.style.display="none"}function preload(matte,next_image){var img=next_image.querySelectorAll("img")[0];if(!("preloaded"in img.dataset&&"true"==img.dataset.preloaded&&img.complete)){delete img.dataset.sizes,img.classList.remove("lazyload","lazyloaded","lazyautosizes"),img.loading="eager",getComputedStyle(matte);var gallery=matte.getElementsByClassName("gallery")[0],maxHeight=Math.min(window.innerHeight,gallery.clientHeight),maxWidth=Math.min(window.innerWidth,gallery.clientWidth),ratio_view=maxWidth/maxHeight,ratio_img=img.width/img.height,ratio_ratios=ratio_view/ratio_img,final_height,final_width;ratio_ratios<1&&ratio_img<1?(final_height=maxWidth/ratio_img,final_width=maxWidth):ratio_ratios>1&&ratio_img<1?(final_height=maxHeight,final_width=maxHeight*ratio_img):ratio_ratios<1&&ratio_img>1?(final_height=maxWidth/ratio_img,final_width=maxWidth):ratio_ratios>1&&ratio_img>1?(final_height=maxHeight,final_width=maxHeight*ratio_img):(final_height=maxHeight,final_width=maxWidth),img.sizes=final_width+"px",img.style.width=final_width+"px",img.style.height=final_height+"px","srcset"in img.dataset&&(img.srcset=img.dataset.srcset),"src"in img.dataset&&(img.src=img.dataset.src)}}function ScrollInc(n,id){var matte=document.getElementById(id),figures=matte.querySelectorAll("figure"),nb_figures=figures.length,new_index,img;function salvageIndex(i){return i<0?nb_figures-1:i>nb_figures-1?0:i}for(var current_index=0,new_index=0,i=0;i<nb_figures;i++)figures[i].classList.contains("active")&&(current_index=i,figures[i].classList.remove("active"));preload(matte,figures[new_index=salvageIndex(current_index+n)]),figures[new_index].querySelectorAll("img")[0].setAttribute("data-preloaded","true"),figures[new_index].classList.add("active"),0!=n?(preload(matte,figures[salvageIndex(new_index+n)]),1==nb_figures&&removeArrows(matte)):(preload(matte,figures[salvageIndex(-1)]),preload(matte,figures[salvageIndex(1)]))}function jumpScroll(event,id){var line_to_pixel=1,line_height=1.5*parseFloat(getComputedStyle(event.currentTarget).fontSize);1==event.deltaMode&&(line_to_pixel=line_height),Math.abs(event.deltaY*line_to_pixel)<line_height&&event.preventDefault(),clearTimeout(isScrolling),scrollX+=event.deltaX,isScrolling=setTimeout((function(){var n;ScrollInc(scrollX<0?-1:scrollX>0?1:0,id),scrollX=0}),50)}window.addEventListener("resize",(function(){clearTimeout(resize_timeout),resize_timeout=setTimeout((function(){for(var mattes=document.getElementsByClassName("pg-exhibition"),j=0;j<mattes.length;j++)for(var figures=mattes[j].querySelectorAll("figure"),i=0;i<figures.length;i++){var img=figures[i].querySelectorAll("img")[0];"true"==img.dataset.preloaded&&(img.setAttribute("data-preloaded","false"),img.setAttribute("data-src",img.src),img.setAttribute("data-srcset",img.srcset),img.sizes="",img.style.width="",img.style.height="",figures[i].classList.contains("active")&&preload(matte,figures[i]))}}),500)}),{passive:!0});var isInViewport=function(elem){var bounding=elem.getBoundingClientRect(),result;return bounding.top>=-40&&bounding.left>=-40&&bounding.bottom<=window.innerHeight+40&&bounding.right<=window.innerWidth+40};window.addEventListener("scroll",(function(event){clearTimeout(isScrolling),isScrolling=setTimeout((function(){var carousels=document.getElementsByClassName("pg-carousel"),exhibitions=document.getElementsByClassName("pg-exhibition");for(i=0;i<carousels.length;i++){var elem=carousels[i];isInViewport(elem)?elem.focus({preventScroll:!1}):elem.blur()}for(i=0;i<exhibitions.length;i++){var elem=exhibitions[i];isInViewport(elem)?elem.focus({preventScroll:!1}):elem.blur()}}),100)}),{passive:!0});